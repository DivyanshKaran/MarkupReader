import{j as e}from"./markdown-vendor-BjvETCrH.js";import{r as t}from"./react-vendor-Jgf6SNKC.js";import{I as x}from"./ui-vendor-BxHwfY5P.js";const E=({src:f,alt:d,className:y="",placeholder:n,loading:s="lazy",onLoad:c,onError:i})=>{const[l,j]=t.useState(!1),[o,h]=t.useState(!1),[b,p]=t.useState(s==="eager"),u=t.useRef(null),r=t.useRef(null);t.useEffect(()=>{if(s==="eager")return;const m=u.current;if(m)return r.current=new IntersectionObserver(a=>{var g;const[w]=a;w.isIntersecting&&(p(!0),(g=r.current)==null||g.disconnect())},{threshold:.1,rootMargin:"50px"}),r.current.observe(m),()=>{var a;(a=r.current)==null||a.disconnect()}},[s]);const v=()=>{j(!0),c==null||c()},N=()=>{h(!0),i==null||i()};return e.jsxs("div",{className:`relative overflow-hidden ${y}`,children:[!l&&!o&&e.jsx("div",{className:"absolute inset-0 bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:n?e.jsx("img",{src:n,alt:"",className:"w-full h-full object-cover opacity-50"}):e.jsx(x,{className:"h-8 w-8 text-gray-400 dark:text-gray-600"})}),o&&e.jsx("div",{className:"absolute inset-0 bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(x,{className:"h-8 w-8 text-gray-400 dark:text-gray-600 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Failed to load image"})]})}),b&&e.jsx("img",{ref:u,src:f,alt:d,className:`w-full h-auto transition-opacity duration-300 ${l?"opacity-100":"opacity-0"}`,onLoad:v,onError:N,loading:s})]})};export{E as default};
